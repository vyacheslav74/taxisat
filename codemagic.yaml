workflows:
  ios-simulator:
    name: iOS Simulator Build
    environment:
      xcode: latest
      flutter: stable
    
    scripts:
      - name: Clean and setup
        script: |
          flutter clean
          flutter pub get
          
      - name: Build for simulator
        script: |
          # Сборка для симулятора
          flutter build ios --simulator --no-codesign --debug
          
      - name: Verify build
        script: |
          if [ -d "build/ios/iphonesimulator/Runner.app" ]; then
            echo "✅ Build successful! App ready for simulator"
            du -sh build/ios/iphonesimulator/Runner.app
          else
            echo "❌ Build failed - no app found"
            exit 1
          fi
    
    artifacts:
      - build/ios/iphonesimulator/Runner.app
